{"version":3,"sources":["SearchBarFunctions.ts"],"names":["setSearchResultsHeight","searchBar","searchResults","getElementsByClassName","searchResultsInner","style","height","clientHeight","setSeachParameters","eventTarget","event","currentTarget","target","closest","searchInput","document","getElementById","postPermalinkContianer","itemPermalink","getAttribute","value","innerText","innerHTML","classList","remove","handleSearchResultsSuccess","response","add","handleSearchResultsError","handleSearchSubmission","preventDefault","window","location","assign","submit","clearSeachParameters","getSearchResults","postType","postsPerPage","searchData","action","isNaN","parseInt","postSearch","$","ajax","type","url","dataType","data","success","error"],"mappings":"AACA,IAAMA,uBAA6D,SAACC,GAChE,IAAMC,EAAsBD,EAAUE,uBAAuB,iBAAiB,GAE9E,GAAKD,EAAL,CAEA,IAAME,EAA2BF,EAAcC,uBAAuB,SAAS,GAE1EC,IAELF,EAAcG,MAAMC,OAASF,EAAmBG,aAAe,QAI7DC,mBAAkC,WACpC,IAAMC,EAAoBC,MAAMC,eAAiBD,MAAME,OAEvD,GAAKH,EAAL,CAEA,IAAMR,EAAkBQ,EAAYI,QAAQ,cACtCC,EAAoBC,SAASC,eAAe,gBAC5CC,EAA+BF,SAASC,eAAe,wBACvDE,EAAyBT,EAAYU,aAAa,gCAClDjB,EAAsBa,SAASC,eAAe,kBAE/Cf,GAAca,GAAgBG,GAA2BC,GAAkBhB,IAEhFY,EAAYM,MAAQX,EAAYY,UAChCJ,EAAuBG,MAAQF,EAC/BhB,EAAcoB,UAAY,KAC1BrB,EAAUsB,UAAUC,OAAO,OAC3BvB,EAAUsB,UAAUC,OAAO,WAE3BxB,uBAAuBC,MAKrBwB,2BAAwD,SAACC,GAC3D,IAAMxB,EAAsBa,SAASC,eAAe,kBAEpD,GAAKd,EAAL,CAEA,IAAMD,EAAkBC,EAAcW,QAAQ,cAEzCZ,IAEYyB,EAAZA,GAAuB,4EAE5BxB,EAAcoB,UAAYI,EAC1BzB,EAAUsB,UAAUC,OAAO,WAC3BvB,EAAUsB,UAAUI,IAAI,OAExB3B,uBAAuBC,MAIrB2B,yBAAsD,SAACF,KAIvDG,uBAAsC,WACxCnB,MAAMoB,iBAEN,IAAMrB,EAAoBC,MAAMC,eAAiBD,MAAME,OACjDK,EAA+BF,SAASC,eAAe,wBAExDP,GAAgBQ,IAEjBA,EAAuBG,MAASW,OAAOC,SAASC,OAAOhB,EAAuBG,OAElFX,EAAYyB,WAKVC,qBAA2D,SAAClC,GAC9D,IAAMgB,EAA+BF,SAASC,eAAe,wBAExDf,GAAcgB,IAEnBA,EAAuBG,MAAQ,OAK7BgB,iBAAgC,WAClC,IAAM3B,EAAoBC,MAAMC,eAAiBD,MAAME,OAEvD,GAAKH,EAAL,CAEA,IAAMR,EAAkBQ,EAAYI,QAAQ,cACtCX,EAAsBa,SAASC,eAAe,kBAEpD,GAAKf,GAAcC,EAAnB,CAEA,IAAMmC,EAAoBpC,EAAUkB,aAAa,yBAA2BlB,EAAUkB,aAAa,yBAA2B,MACxHmB,EAAwBrC,EAAUkB,aAAa,2BAA6B,GAG5EoB,EAAmB,CACrBC,OAAe,mBACfH,SAAeA,EACfC,aALgCG,MAAMC,SAASJ,IAA0C,EAAzBI,SAASJ,GAMzEK,WALyBlC,EAAYW,OAAS,IAQlDlB,EAAcoB,UAAY,KAC1BrB,EAAUsB,UAAUC,OAAO,OAC3BvB,EAAUsB,UAAUI,IAAI,WAExB3B,uBAAuBC,GACvBkC,qBAAqBlC,GAErB2C,EAAEC,KAAK,CACHC,KAAW,MACXC,IAAW,2BACXC,SAAW,OACXC,KAAWV,EAEXW,QAAU,SAACxB,GACPD,2BAA2BC,IAG/ByB,MAAQ,SAACzB,GACLE,yBAAyBF","file":"SearchBarFunctions.min.js","sourcesContent":["//Search Bar Functions\r\nconst setSearchResultsHeight : (searchBar : HTMLElement) => void = (searchBar) => {\r\n    const searchResults : any = searchBar.getElementsByClassName(\"searchResults\")[0];\r\n\r\n    if (!searchResults) { return; }\r\n\r\n    const searchResultsInner : any = searchResults.getElementsByClassName(\"inner\")[0];\r\n\r\n    if (!searchResultsInner) { return; }\r\n\r\n    searchResults.style.height = searchResultsInner.clientHeight + \"px\";\r\n\r\n    return;\r\n}\r\nconst setSeachParameters : () => void = () => {\r\n    const eventTarget : any = event.currentTarget || event.target;\r\n\r\n    if (!eventTarget) { return; }\r\n\r\n    const searchBar : any = eventTarget.closest(\".SearchBar\");\r\n    const searchInput : any = document.getElementById(\"search-value\");\r\n    const postPermalinkContianer : any = document.getElementById(\"search-postPermalink\");\r\n    const itemPermalink : string = eventTarget.getAttribute(\"data-search-result-permalink\") ; \"\";\r\n    const searchResults : any = document.getElementById(\"search-results\");\r\n\r\n    if (!searchBar || !searchInput || !postPermalinkContianer || !itemPermalink || !searchResults) { return; }\r\n\r\n    searchInput.value = eventTarget.innerText;\r\n    postPermalinkContianer.value = itemPermalink;\r\n    searchResults.innerHTML = null;\r\n    searchBar.classList.remove(\"set\");\r\n    searchBar.classList.remove(\"loading\");\r\n\r\n    setSearchResultsHeight(searchBar);\r\n\r\n    return; \r\n}\r\n\r\nconst handleSearchResultsSuccess : (response : any) => void = (response) => {\r\n    const searchResults : any = document.getElementById(\"search-results\");\r\n\r\n    if (!searchResults) { return; }\r\n\r\n    const searchBar : any = searchResults.closest(\".SearchBar\");\r\n\r\n    if (!searchBar) { return; }\r\n    \r\n    if (!response) { response = \"<div class='noResults'><p class='color-white'>No results found.</p></div>\"; }\r\n\r\n    searchResults.innerHTML = response;\r\n    searchBar.classList.remove(\"loading\");\r\n    searchBar.classList.add(\"set\");\r\n\r\n    setSearchResultsHeight(searchBar);\r\n\r\n    return;\r\n}\r\nconst handleSearchResultsError : (response : any) => void = (response) => {\r\n\r\n    return;\r\n}\r\nconst handleSearchSubmission : () => void = () => {\r\n    event.preventDefault();\r\n\r\n    const eventTarget : any = event.currentTarget || event.target;\r\n    const postPermalinkContianer : any = document.getElementById(\"search-postPermalink\");\r\n\r\n    if (!eventTarget || !postPermalinkContianer) { return; }\r\n\r\n    if (postPermalinkContianer.value) { window.location.assign(postPermalinkContianer.value); return; }\r\n\r\n    eventTarget.submit();\r\n\r\n    return;\r\n}\r\n\r\nconst clearSeachParameters : (searchBar : HTMLElement) => void = (searchBar) => {\r\n    const postPermalinkContianer : any = document.getElementById(\"search-postPermalink\");\r\n\r\n    if (!searchBar || !postPermalinkContianer) { return; }\r\n\r\n    postPermalinkContianer.value = null;\r\n\r\n    return; \r\n}\r\n\r\nconst getSearchResults : () => void = () => {\r\n    const eventTarget : any = event.currentTarget || event.target;\r\n\r\n    if (!eventTarget) { return; }\r\n\r\n    const searchBar : any = eventTarget.closest(\".SearchBar\");\r\n    const searchResults : any = document.getElementById(\"search-results\");\r\n\r\n    if (!searchBar || !searchResults) { return; }\r\n\r\n    const postType : string = searchBar.getAttribute(\"data-search-post-type\") ? searchBar.getAttribute(\"data-search-post-type\") : \"any\";\r\n    const postsPerPage : string = searchBar.getAttribute(\"data-search-post-count\") || \"\";\r\n    const postsPerPageValue : number = !isNaN(parseInt(postsPerPage)) ? parseInt(postsPerPage) : 3;\r\n    const searchValue : string = eventTarget.value || \"\";\r\n    const searchData : any = {\r\n        action       : \"getSearchResults\",\r\n        postType     : postType,\r\n        postsPerPage : postsPerPageValue,\r\n        postSearch   : searchValue\r\n    };\r\n\r\n    searchResults.innerHTML = null;\r\n    searchBar.classList.remove(\"set\");\r\n    searchBar.classList.add(\"loading\");\r\n\r\n    setSearchResultsHeight(searchBar);\r\n    clearSeachParameters(searchBar);\r\n\r\n    $.ajax({\r\n        type     : 'GET',\r\n        url      : '/wp-admin/admin-ajax.php',\r\n        dataType : 'html',\r\n        data     : searchData,\r\n\r\n        success : (response : any) => {\r\n            handleSearchResultsSuccess(response);\r\n        },\r\n\r\n        error : (response : any) => {\r\n            handleSearchResultsError(response);\r\n        }\r\n    });\r\n}"]}